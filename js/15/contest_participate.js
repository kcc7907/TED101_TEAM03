$(document).ready((function(){$("#JHC #formStep2").hide(),$("#JHC #formStep3").hide(),$("#JHC form#preview").hide(),$("#JHC .lastP").hide(),$("#JHC div.confirmDivC").hide(),$("#JHC input#submitStep1").prop("checked",!1),$("#JHC input#submitStep1").val("0"),checkCookie("loging")?goStep():(logBox(),memBox()),$("#formStep1 button.nextBtn").click(goStep),$("#sureGoHome").click(()=>{$("#JHC #formStep2").hide(),$("#JHC #formStep3").hide(),$("#JHC form#preview").hide(),$("#JHC .lastP").hide(),$("#JHC div.confirmDivC").hide(),$("#JHC #formStep1").show(),$("#JHC input#submitStep1").prop("checked",!1),vueJH.pImgUrl=["","",""],vueJH.pImgName=["請選擇上傳檔案","請選擇上傳檔案","請選擇上傳檔案"],vueJH.fName="",vueJH.fConcept="",vueJH.selectType="請選擇作品種類",$("#JHC form input").val(""),logBox(),memBox()}),$(".login").click(()=>{$("#JHC input#submitStep1").prop("checked",!1),$("#JHC input#submitStep1").val("0")})}));let vueJH=new Vue({el:"#JHC",data:{pImgName:["請選擇上傳檔案","請選擇上傳檔案","請選擇上傳檔案"],pImgUrl:["","",""],workTypes:["沙發","桌子","床","椅子","書櫃"],fName:"",fConcept:"",selectType:"請選擇作品種類"},mounted(){$(".zoom").hide()},methods:{zoomOut(e){let t=$(e.target).attr("data-id");$(".zoom").eq(t).show()},noZoom(e){let t=$(e.target).attr("data-id");$(".zoom").eq(t).hide()},fillPID(){$("input#pIdNum").val("J122938232")},fillWork(){this.fName="凹凸有致",this.fConcept="「從細微處 感受生活」，思想頓悟時節傳統思維汲取靈感進發一個眼色，即心領神會導致一個完美的合作。",this.selectType="桌子"},file1(){let e=this,t=document.getElementById("pId").files[0];this.pImgName[0]=t.name;let i=new FileReader;i.readAsDataURL(t),i.addEventListener("load",(function(t){e.pImgUrl.splice(0,1,t.target.result)}))},file2(){let e=this,t=document.getElementById("draft").files[0];this.pImgName[1]=t.name;let i=new FileReader;i.readAsDataURL(t),i.addEventListener("load",(function(t){e.pImgUrl.splice(1,1,t.target.result)}))},file3(){let e=this,t=document.getElementById("draw").files[0];this.pImgName[2]=t.name;let i=new FileReader;i.readAsDataURL(t),i.addEventListener("load",(function(t){e.pImgUrl.splice(2,1,t.target.result)}))}},computed:{}});function checkRequired(e){let t=$(e).closest("form.formStep").find('[required="required"]');if(need=!0,checkPID=!0,0!==$(e).closest("form.formStep").find("#pIdNum").length){$(t).each((function(e,t){""==$(t).val()||0==$(t).val()?need=!1:need=!0}));let i=$("#pIdNum").val().trim();if(/^[A-Z][12]\d{8}$/.test(i)?checkPID=!0:checkPID=!1,1==need&&1==checkPID)$(e).closest("form").hide(),$(e).closest("form").next("form").show();else if(1==need&&!0!==checkPID){confirmContest("請輸入正確身分證號碼。")}else{confirmContest("所有欄位為必填，請輸入完整資訊。")}}else if($(t).each((function(e,t){0==Boolean($(t).val())?need=!1:need=!0})),1==need)$(e).closest("form").hide(),$(e).closest("form").next("form").show();else{confirmContest("所有欄位為必填，請輸入完整資訊。")}}function goStep(){$('#JHC label[for="submitStep1"]').click(()=>{$("#JHC input #submitStep1").prop("checked",!0)?$("#JHC input#submitStep1").val("1"):$("#JHC input#submitStep1").val("0")}),$("#JHC input#submitStep1").prop("checked",!0)?$("#JHC input#submitStep1").val("1"):$("#JHC input#submitStep1").val("0"),checkCookie("loging")?$("#JHC button.nextBtn").click((function(e){checkRequired(e.target)})):(logBox(),memBox()),$("#JHC .backBtn").click((function(){$(this).closest("form").hide(),$(this).closest("form").prev("form").show()})),$("button.viewThis").click((function(e){$("form#preview").show(),$("#preview .clickVote").css("opacity","1"),$("#preview").click(()=>{$("#preview").hide(),$("#preview .clickVote").css("opacity","0")})})),$(".sureThis").click(e=>{let t=$(e.target).closest("form.formStep").find('[required="required"]'),i=!0;if($(t).each((function(e,t){i=""!=$(t).val()&&0!=$(t).val()})),1==i)$("#JHC div.confirmDivC").find("p.contentFont").text("確認是否送出？"),$("div.confirmDivC").show().css({zIndex:"99",opacity:"1"}),$("#JHC #sureGoContest").click((function(){let e=getCookie("loging"),t=$("#JHC #pIdNum").val().trim(),i=$("#JHC #fType").val(),o=$("#JHC #fName").val().trim(),n=$("#JHC #fConcept").val().trim(),c=$("#JHC input#pId").prop("files")[0],p=$("#JHC input#draft").prop("files")[0],s=$("#JHC input#draw").prop("files")[0],l=new FormData;l.append("contestant",e),l.append("pIdNum",t),l.append("type",i),l.append("name",o),l.append("concept",n),l.append("file1",c),l.append("file2",p),l.append("file3",s),$.ajax({url:"contestR.php",type:"POST",data:l,contentType:!1,cache:!1,processData:!1,success:function(e){$("#JHC .step form").hide(),$("#JHC .lastP").show(),$("div.confirmDivC").css({zIndex:"-99",opacity:"0"}).hide()}})})),$("#notsureGoContest").click((function(){$("div.confirmDivC").css({zIndex:"-99",opacity:"0"}).hide()})),console.log();else{confirmContest("所有欄位為必填，請輸入完整資訊。")}})}function confirmContest(e){$("#notsureGoContest").hide(),$("#JHC div.confirmDivC").find("p.contentFont").text(e),$("div.confirmDivC").show().css({zIndex:"99",opacity:"1"}),$("#JHC #sureGoContest").click((function(){$("div.confirmDivC").css({zIndex:"-99",opacity:"0"}).hide(),$("#notsureGoContest").show()}))}